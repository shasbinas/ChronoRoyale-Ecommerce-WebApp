<main class="main">
  <section class="mt-50 mb-50">
    <div class="container">
      <h2 class="mb-4 text-center fw-bold">Order History</h2>

      <style>
        /* Add spacing between order cards */
        .order-history .order-card {
          margin-bottom: 2.5rem; /* gap between each order */
          border-radius: 12px;
          background-color: #fff;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
          transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .order-history .order-card:hover {
          transform: translateY(-3px);
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
        }

        .order-history .order-card:last-child {
          margin-bottom: 0; /* no gap after last one */
        }
      </style>

      {{#if orders.length}}
      <div class="order-history">
        {{#each orders}}
        <div class="order-card p-4 border">

          <!-- HEADER -->
          <div class="d-flex justify-content-between align-items-center mb-3 border-bottom pb-2">
            <div>
              <h5 class="mb-1 text-dark fw-semibold">
                Order ID:
                <span class="text-secondary">{{this._id}}</span>
              </h5>
              <small class="text-muted">Placed on: {{this.createdAt}}</small>
            </div>

            <div>
              <span class="badge 
                {{#if (eq this.status 'Delivered')}}bg-success
                {{else if (eq this.status 'Shipped')}}bg-info
                {{else if (eq this.status 'Pending')}}bg-warning
                {{else}}bg-secondary{{/if}} 
                px-3 py-2 rounded-pill">
                {{this.status}}
              </span>
            </div>
          </div>

          <!-- ADDRESS + PAYMENT -->
          <div class="row mb-3">
            <div class="col-md-6">
              <h6 class="fw-bold mb-2">Billing Details</h6>
              <p class="mb-1">{{this.address.billingName}}</p>
              <p class="mb-1">{{this.address.address}}</p>
              <p class="mb-1">Landmark: {{this.address.landmark}}</p>
              <p class="mb-1">Phone: {{this.address.phone}}</p>
              <p class="mb-0">Payment: <strong>{{this.address.paymentMethod}}</strong></p>
            </div>

            <div class="col-md-6 text-md-end mt-3 mt-md-0">
              <h6 class="fw-bold text-muted">Order Summary</h6>
              <p class="mb-1">Items: {{this.cart.length}}</p>
              <p class="mb-1 fw-semibold">Total Amount: <span class="text-success">₹{{this.totalAmount}}</span></p>
            </div>
          </div>

          <!-- PRODUCT TABLE -->
          <div class="table-responsive">
            <table class="table align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>Product</th>
                  <th>Brand</th>
                  <th>Qty</th>
                  <th>Price</th>
                  <th>Total</th>
                  <th>Image</th>
                </tr>
              </thead>
              <tbody>
                {{#each this.cart}}
                <tr>
                  <td class="fw-medium">{{this.name}}</td>
                  <td>{{this.brand}}</td>
                  <td>{{this.quantity}}</td>
                  <td>₹{{this.price}}</td>
                  <td>₹{{this.total}}</td>
                  <td><img src="{{this.image}}" alt="{{this.name}}" class="rounded" width="60"></td>
                </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
        {{/each}}
      </div>

      {{else}}
      <div class="text-center mt-5">
        <img src="/userAssets/images/empty-orders.svg" alt="No Orders" width="150" class="mb-3">
        <p class="lead text-muted">You have no orders yet.</p>
        <a href="/shop" class="btn btn-primary mt-2 px-4">Shop Now</a>
      </div>
      {{/if}}
    </div>
  </section>
</main>
